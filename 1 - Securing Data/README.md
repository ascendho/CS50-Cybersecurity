# Securing Data

## 一、课程概述
- **课程主题**：聚焦数据安全核心，涵盖密码安全存储、加密技术、数据传输与存储保护，以及新兴技术对安全的影响。
- **主讲人**：David J. Malan（哈佛大学）
- **核心目标**：理解数据从存储、传输到删除的全生命周期安全机制，掌握哈希、加密、密钥等核心技术的原理与应用。

## 二、密码的安全存储
### 1. 哈希（Hashing）
- **定义**：将明文（如密码）通过哈希函数转换为不可读的固定长度哈希值，实现密码“加密存储”。
- **核心原理**：
  - 登录时，用户输入的密码会再次经过相同哈希函数计算，与服务器存储的哈希值比对，匹配则认证通过。
  - 哈希函数输出无规律，无哈希函数时无法从哈希值反推明文。
- **安全价值**：即使服务器数据泄露，黑客获取的是哈希值而非明文密码，大幅提升攻击成本。
- **潜在风险**：
  - 字典攻击/暴力破解：黑客将字典词、字符组合逐一哈希，对比泄露的哈希值。
  - 彩虹表（Rainbow Tables）：预存储海量明文-哈希值对应关系，需PB级存储，但仍可能破解简单密码。
  - 相同密码哈希值相同：多人使用同一密码时，哈希值一致，黑客破解一个即可批量获取。

### 2. 盐值（Salting）
- **定义**：在明文密码中加入随机生成的“盐值”（字符串）后再进行哈希，使相同明文产生不同哈希值。
- **核心作用**：
  - 彻底解决“相同密码哈希值相同”的问题，即使密码一致，盐值不同则哈希值不同。
  - 大幅增加彩虹表破解难度（需为每个盐值单独构建彩虹表，成本极高）。
- **NIST 建议**：记忆类密码（如登录密码）必须同时进行哈希和盐值处理，确保存储安全。

### 3. 单向哈希函数（One-Way Hash Functions）
- **特性**：
  - 输入：任意长度的字符串。
  - 输出：固定长度的哈希值。
  - 不可逆：仅通过哈希值无法反推原始输入。
  - 碰撞可能：不同明文可能映射到同一哈希值（概率极低，不影响实际安全）。

## 三、加密核心概念
### 1. 密码学基础术语
| 术语 | 定义 | 核心操作 |
|------|------|----------|
| 编码（Codes） | 将明文单词转换为不易理解的单词串 | 编码（明文→编码文本）、解码（编码文本→明文） |
| 加密（Ciphers） | 通过算法将明文转换为密文（Ciphertext） | 加密（明文→密文）、解密（密文→明文） |
| 密钥（Keys） | 用于加密/解密的长字符串，是算法的核心参数 | 控制加密过程，无密钥则无法正常解密 |

### 2. 对称加密（Secret-Key Cryptography）
- **原理**：发送方和接收方共享同一密钥，通过该密钥对明文加密、对密文解密。
- **核心特点**：
  - 优势：加密/解密效率高，适合大量数据处理。
  - 局限：需安全传递共享密钥，密钥泄露则整个通信不安全。

## 四、公钥加密体系（Public-Key Cryptography）
### 1. 核心原理（非对称加密）
- 解决“无预先信任关系的双方安全通信”问题，使用一对密钥：
  - 公钥（Public Key）：公开可共享，用于加密明文。
  - 私钥（Secret Key/Private Key）：仅接收方持有，用于解密密文。
- **通信流程**：
  1. 发送方用接收方的公钥加密明文，生成密文。
  2. 接收方用自己的私钥解密密文，恢复明文。
- **标准算法**：RSA（应用最广泛的非对称加密算法）。

### 2. 密钥交换（Key Exchange）
- **Diffie-Hellman 算法**：专门用于双方安全交换密钥，无需预先共享密钥。
- **核心步骤**：
  1. 双方约定公开参数（质数p、底数g）。
  2. 各自生成私有密钥，计算并交换公钥。
  3. 双方用自己的私钥和对方的公钥，计算出相同的共享密钥。
- **价值**：后续可通过共享密钥进行对称加密通信（兼顾安全性和效率）。

### 3. 数字签名（Digital Signatures）
- **作用**：验证信息完整性和发送方身份（防篡改、防伪造）。
- **流程**：
  1. 发送方：将文档内容通过哈希函数生成哈希值，用自己的私钥对哈希值加密，生成数字签名。
  2. 接收方：
     - 对文档内容重新计算哈希值。
     - 用发送方的公钥解密数字签名，得到原始哈希值。
     - 对比两个哈希值，一致则说明文档未篡改且发送方身份合法。

## 五、数据保护实际应用
### 1. 密钥（Passkeys/WebAuthn）
- **原理**：基于公钥加密的无密码登录技术，设备依赖型。
- **流程**：
  1. 注册时，设备生成公钥和私钥，公钥发送给网站存储。
  2. 登录时，设备用私钥对网站发送的“挑战值”签名，网站用公钥验证签名，完成认证。
- **优势**：无需记忆密码，彻底避免密码泄露风险，未来将逐步替代传统用户名+密码登录。

### 2. 传输中加密（Encryption in Transit）
- **定义**：保护数据在网络传输过程中的安全，防止中间人窃取。
- **核心技术**：
  - 端到端加密（End-to-End Encryption）：仅发送方和接收方能解密数据，中间服务提供商（如邮件服务商）无法读取，适用于即时通讯、邮件等场景。

### 3. 安全删除（Secure Deletion）
- **问题**：普通删除仅删除文件索引，数据仍存储在硬盘中，可能被恢复。
- **解决方案**：通过软件将删除文件的残留数据覆盖为0、1或随机字符，彻底清除数据痕迹，避免泄露。

### 4. 全盘加密（Full-Disk Encryption/Encryption at Rest）
- **定义**：对硬盘中所有数据进行加密（数据静止时的加密）。
- **优势**：设备被盗或转售时，无解密密钥则无法访问数据，保护敏感信息。
- **风险**：
  - 丢失解密密钥（如密码、生物特征失效），则无法恢复数据。
  - 易被勒索软件利用：黑客加密硬盘后索要赎金。

## 六、新兴技术与威胁：量子计算（Quantum Computing）
- **核心影响**：量子计算机具备指数级计算能力，可能大幅缩短密码破解、加密破解的时间。
- **潜在风险**：现有加密算法（如RSA、Diffie-Hellman）可能被量子计算机破解。
- **展望**：需提前研发量子-resistant加密算法，抢占技术先机，应对未来安全威胁。

## 七、关键总结与注意事项
1. 密码存储安全的核心：哈希+盐值，不可逆且防批量破解。
2. 加密技术分类：对称加密（高效）、非对称加密（安全，适用于密钥交换/签名），实际场景中常结合使用。
3. 数据全生命周期保护：覆盖存储（哈希、加密）、传输（端到端加密）、删除（安全删除）。
4. 无密码登录是未来趋势：Passkeys基于公钥加密，安全性远超传统密码。
5. 技术双刃剑：全盘加密可保护数据，也可能被勒索软件滥用；量子计算既可能带来威胁，也可能提升防御能力。
